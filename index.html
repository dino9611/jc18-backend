<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>

  <script>
    const fetchdata = (url) => {
      return new Promise((resolve, reject) => {
        const ajax = new XMLHttpRequest();
        ajax.onload = () => {
          if (ajax.status === 200) {
            const data = JSON.parse(ajax.responseText);
            resolve({ data });
          } else {
            reject({ message: "err bro", err: ajax.statusText });
          }
        };

        ajax.open("GET", url);
        ajax.send();
      });
    };

    // const cbberhasil = (res) => {
    //   console.log(res.data);
    // };

    // const cbgagal = (err) => {
    //   console.log(err);
    // };

    const init = async () => {
      // fetchdata(`http://localhost:5000/products`)
      //   .then((res) => {
      //     console.log("first => ", res.data);
      //     return fetchdata(`http://localhost:5000/users`);
      //   })
      //   .then((res1) => {
      //     console.log("users =>", res1.data);
      //   })
      //   .catch((err) => {
      //     console.log(err);
      //   });
      //  cara async await
      try {
        const res = await fetchdata(`http://localhost:5000/products`);
        console.log("first => ", res.data);
        const res1 = await fetchdata(`http://localhost:5000/users`);
        console.log("users =>", res1.data);
      } catch (error) {
        console.log(err);
      }
    };

    init();
  </script>
</html>
